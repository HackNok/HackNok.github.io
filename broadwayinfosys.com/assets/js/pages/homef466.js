$(function(){$("#mobile").mask("(999) 999-9999");$("#phone").mask("(99)-9999999");$(".mobileNum").intlTelInput({allowDropdown:true,formatOnDisplay:true,autoPlaceholder:true,customPlaceholder:function(selectedCountryPlaceholder,selectedCountryData){return "e.g. "+'9851117578';},preferredCountries:['np'],separateDialCode:true,utilsScript:"{{ asset('assets/js/others/utils.js')}}"});$(".phoneNum").intlTelInput({allowDropdown:true,formatOnDisplay:false,autoPlaceholder:true,customPlaceholder:function(selectedCountryPlaceholder,selectedCountryData){return "e.g. "+'01-4117578';},preferredCountries:['np'],separateDialCode:true,utilsScript:"{{ asset('assets/js/others/utils.js')}}"});var form='enquiry-form';var form_submit_btn='enquiry-submit-btn';function validate(event){event.preventDefault();if($('#'+form).valid()){$('#'+form_submit_btn).prop('disabled',true).html('<i class="fa fa-spinner fa-spin"></i> Submitting Data');$('#'+form).submit();}}
function onload(){var element=document.getElementById(form_submit_btn);element.onclick=validate;}
function resetError($this){if($this.valid()==true){if($this.attr('name')=='captcha'){$this.closest('div.form-group').find('.validation-notification').remove();}
$this.closest('div.form-group').removeClass('has-error');}}
onload();$('#enquiry-form').validate({ignore:".ignore",errorPlacement:function(error,element){element.closest('div.form-group').addClass('has-error');if(element.attr("name")==courseInputName){element.closest('div.form-group').addClass('category-error');error.insertAfter(element.closest('div.form-group').find('#course-popup'));}
else
error.insertAfter(element);},invalidHandler:function(e,validator){var errors=validator.numberOfInvalids();if(errors){if(validator.errorList.length>0){for(x=0;x<validator.errorList.length;x++){var element=$(validator.errorList[x].element);if(element.attr("name")==courseInputName){}}}}
validator.focusInvalid();},});$('.course-select-checkbox').change(function(){if($(this).is(':checked')){$('.category-error').removeClass('has-error');$('.category-error').find('.error').remove();}});$('.open-course-popup-link').magnificPopup({type:'inline',midClick:true});var processing=false;$('body').on('keyup','#course_popup_filter_inp',function(){var search_txt=$(this).val().toLowerCase();if(!processing){processing=true;$('.course-list').each(function(i,e){var match_with=$(e).attr('data-course-name').toLowerCase();if(match_with.indexOf(search_txt)>=0){$(e).show();}else{$(e).hide();}});processing=false;}});$('.course-list').find('.checkbox').change(function(){var name_list_ul=$('#selected-course-wrapper').find('ul');name_list_ul.html('');var li_html='';$('.course-list').each(function(i,e){var checbox_input=$(this).find('.checkbox');if(checbox_input.is(':checked')){li_html=li_html+'<li>'+$(this).attr('data-course-name');}});name_list_ul.html(li_html);});$('form').each(function(){$(this).find('input[name="search"]').keypress(function(e){if(e.which==10||e.which==13){this.form.submit();}});});$("#success-slider").owlCarousel({loop:true,margin:15,responsiveClass:true,dots:true,lazyLoad:true,responsive:{0:{items:1,nav:false},600:{items:2},1000:{items:3}}});$(".upcomingCarousel").owlCarousel({loop:false,margin:30,responsiveClass:true,dots:false,nav:true,lazyLoad:true,responsive:{0:{items:1},600:{items:2},1000:{items:4}}});$('#testimonials').owlCarousel({loop:true,margin:10,responsiveClass:true,dots:true,autoHeight:true,nav:false,lazyLoad:true,responsive:{0:{items:1},600:{items:1,nav:false},1000:{items:1,nav:false,loop:false}}})
$(".client-list").owlCarousel({loop:true,margin:10,responsiveClass:true,lazyLoad:true,responsive:{0:{items:1,nav:false},600:{items:3},1000:{items:5}}});var substringMatcher=function(strs){return function findMatches(q,cb){var matches,substringRegex;matches=[];substrRegex=new RegExp(q,'i');$.each(strs,function(i,str){if(substrRegex.test(str)){matches.push(str);}});cb(matches);};};var course=coursesTags;$('#courseSearch .typeahead').typeahead({hint:true,highlight:true,minLength:1},{name:'course',source:substringMatcher(course)});function submitData(){var name_selector=$('input[name="sName"]');var email_selector=$('input[name="sEmail"]');var mobile_selector=$('input[name="sMobile"]');var ul_selector=$('.error-message');var validation_fail=false;var name=name_selector.val();var email=email_selector.val();var mobile=mobile_selector.val();ul_selector.html('');if(name==""){validation_fail=true;ul_selector.append('<li>Please, fill the name fields.</li>');}else{}
if(email==""){validation_fail=true;ul_selector.append('<li>Please, fill the email fields.</li>');}else{}
if(email!==""&&!validateEmail(email)){validation_fail=true;ul_selector.append('<li>Please, provide a valid email.</li>');}else{}
if(mobile==""){validation_fail=true;ul_selector.append('<li>Please, fill the phone fields.</li>');}else{}
if(!validation_fail){ul_selector.html('').hide();}else{ul_selector.show();return false;}
$('#offer-submit-btn').html('<i class="fa fa-spinner fa-spin"></i> Processing....');$.ajax({url:popup_form_url,method:'POST',data:{name:name,email:email,mobile:mobile,},success:function(response){ul_selector.addClass('alert-success').addClass('alert-success').html('<li>'+response.message+'</li>').show();setTimeout(function(){disableOffer();$('#specialModal').modal('hide');},5000);}});}
function validateEmail(sEmail){var filter=/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;if(filter.test(sEmail)){return true;}
else{return false;}}
$('.fancybox').fancybox({padding:0,maxWidth:'100%',maxHeight:'100%',width:560,height:315,autoSize:true,closeClick:true,openEffect:'elastic',closeEffect:'elastic'});$('#courseSearch').submit(function(){var url=$(this).attr('data-action');var query=$(this).find('input[name="search"]').val();if(query){location.href=url+'?search='+query;}
return false;});if(has_home_popup_notice=='Yes'){$.magnificPopup.open({items:{src:'<div class="white-popup"><a href="'+home_popup_notice_link+'"><img src="'+home_popup_notice_img+'" /></div>',type:'inline'}});}
function js(url){s=document.createElement("script");s.type="text/javascript";s.src=url;document.getElementsByTagName("head")[0].appendChild(s);}});